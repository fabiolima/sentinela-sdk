(function(e){typeof define=="function"&&define.amd?define(e):e()})(function(){"use strict";var g=Object.defineProperty;var S=(e,t,o)=>t in e?g(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o;var d=(e,t,o)=>(S(e,typeof t!="symbol"?t+"":t,o),o),I=(e,t,o)=>{if(!t.has(e))throw TypeError("Cannot "+o)};var u=(e,t,o)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,o)};var l=(e,t,o)=>(I(e,t,"access private method"),o);var i,m,s,h;function e(){return window.crypto.randomUUID()}function t(){const r=window.localStorage.getItem("sentinela-userid");if(!r){const n=e();return window.localStorage.setItem("sentinela-userid",n),n}return r}function o(){return console.log("https://sentinela-analytics.onrender.com"),"https://sentinela-analytics.onrender.com"}class f{constructor(){u(this,i);u(this,s);d(this,"endpoint");d(this,"domain");d(this,"userId")}start(){this.endpoint=o(),this.domain=document.currentScript.getAttribute("data-domain"),this.userId=t(),l(this,i,m).call(this)}async sendError(n){n={...n,user_id:this.userId,date:new Date().toISOString(),href:location.href,referrer:document.referrer||null,domain:this.domain};const a=`${this.endpoint}/errors`;return fetch(a,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify({...n})})}}i=new WeakSet,m=function(){window.addEventListener("error",n=>l(this,s,h).call(this,n))},s=new WeakSet,h=async function(n){const a={message:n.error.message,stack:n.error.stack,filename:n.filename,lineno:n.lineno,colno:n.colno};try{await this.sendError(a)}catch(c){console.error(c)}},((r,n)=>{r.location;var c=r.document.querySelector('[src*="'+n+'"]');c&&c.getAttribute("data-domain");const p=new f({apiDomain:n,host:n});r.Sentinela=p,r.Sentinela.start()})(window,"http://localhost:3000")});
